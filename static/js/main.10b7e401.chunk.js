(this["webpackJsonpfull-stack-events-app"]=this["webpackJsonpfull-stack-events-app"]||[]).push([[0],{52:function(e,t,n){},79:function(e,t){},80:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),s=n.n(c),r=n(41),i=n.n(r),l=n(13),o=n.n(l),u=n(19),d=n(8),j=(n(31),n(52),n(20),n(42)),b=n(43),p=n(24),m=n.n(p),h="https://fs-events-app.herokuapp.com/",v=function(){function e(t,n){Object(j.a)(this,e),this.token=t,this.logoutFunction=n}return Object(b.a)(e,[{key:"createUserAction",value:function(e,t,n){var a=this;return m()({method:e,url:t,headers:{authorization:this.token()},data:n}).catch((function(e){if(403===e.response)return a.logoutFunction(),Promise.reject();throw e}))}},{key:"logIn",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:"post",url:"".concat(h,"auth"),data:{username:t,password:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"signUp",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:"post",url:"".concat(h,"signup"),data:{username:t,password:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getUser",value:function(e){return this.createUserAction("get","".concat(h,"user/").concat(e))}},{key:"updateUser",value:function(e,t){return this.createUserAction("put","".concat(h,"user/").concat(e),t)}},{key:"deleteUser",value:function(e){return this.createUserAction("delete","".concat(h,"user/").concat(e))}},{key:"createEvent",value:function(e){return this.createUserAction("post",h,e)}},{key:"getEvents",value:function(){return this.createUserAction("get",h)}},{key:"getEvent",value:function(e){return this.createUserAction("get","".concat(h).concat(e))}},{key:"deleteEvent",value:function(e){return this.createUserAction("delete","".concat(h).concat(e))}},{key:"updateEvent",value:function(e,t){return this.createUserAction("put","".concat(h).concat(e),t)}}]),e}(),O=n(16),f=n(81),x=n(86),g=n(85),y=n.p+"static/media/loading-gif.30c0aa7c.gif",w=function(e){var t=Object(c.useState)(!1),n=Object(d.a)(t,2),s=n[0],r=n[1];return Object(a.jsx)(f.a,{className:"mt-5 d-flex justify-content-center",children:Object(a.jsxs)(x.a,{style:{width:"18rem"},children:[Object(a.jsx)(x.a.Header,{children:"Login"}),Object(a.jsxs)(x.a.Body,{children:[Object(a.jsxs)(g.a,{onSubmit:function(t){return function(t){t.preventDefault(),r(!0),e.apiClient.logIn(t.target.username.value,t.target.password.value).then((function(t){console.log(t);var n={username:t.data._doc.username,id:t.data._doc._id};e.logInFunc(n,t.data.token),r(!1)})).catch((function(e){r(!1),401===e.response.status?alert("Username or password incorrect"):alert("Sorry. Unable to log in at the moment.")}))}(t)},children:[Object(a.jsx)(g.a.Group,{controlId:"formBasicEmail",id:"login-form",children:Object(a.jsx)("input",{style:{width:"100%"},placeholder:"Username",className:"input-styled",type:"username",name:"username"})}),Object(a.jsx)(g.a.Group,{controlId:"formBasicPassword",children:Object(a.jsx)("input",{style:{width:"100%"},placeholder:"Password",className:"input-styled",type:"Password",name:"password"})}),Object(a.jsx)("button",{style:{width:"100%"},className:"my-2 btn button",type:"submit",disabled:s,children:s?Object(a.jsx)("img",{id:"loader",src:y,alt:"...loading"}):"login"})]}),Object(a.jsxs)("small",{children:["Username: mike",Object(a.jsx)("br",{})," Password: test"]})]})]})})},N=n(6),E=function(e){return e.loggedIn?Object(a.jsx)(N.a,{to:{pathname:"/events"}}):Object(a.jsx)(w,Object(O.a)({},e))},k=n(82),S=n(83),U=n(18),C=n.n(U),F=function(e){var t=e.logout,n=e.user,c=e.events,s=e.apiClient;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{className:"mt-5",children:"Profile"}),Object(a.jsxs)(k.a,{className:"my-5",variant:"dark",bordered:!0,striped:!0,children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:"Username"}),Object(a.jsx)("td",{children:"Events in schedule"})]})}),Object(a.jsx)("tbody",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:n.username}),Object(a.jsx)("td",{children:function(e){var t=c.filter((function(e){return e.user===n.username}));return t.length}(n.username)})]})})]}),Object(a.jsx)(S.a,{variant:"btn button",className:"mr-3",onClick:t,children:"Logout"}),Object(a.jsx)("button",{className:"btn button-delete",onClick:function(){return e=n.id,void s.deleteUser(e).then((function(){C.a.success("Account Deleted!"),t()})).catch((function(e){C.a.warning("Sorry, unable to delete account at this time.")}));var e},children:"Delete Account"})]})},I=n(7),A=n.p+"static/media/plus-circle-solid.3a4d615f.svg",D=function(e){var t=e.filterEvents,n=e.allEvents;return Object(a.jsxs)("section",{className:"filter-bar my-5 rounded d-flex justify-content-between align-items-center",children:[Object(a.jsx)("div",{children:Object(a.jsxs)("h3",{children:[Object(a.jsx)("span",{className:"text-purple",children:n.length})," Events"]})}),Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(g.a,{className:"mr-3",onChange:function(e){return t(e.target.value)},children:Object(a.jsxs)("select",{id:"filter",children:[Object(a.jsx)("option",{value:"all",children:"All Events"}),Object(a.jsx)("option",{value:"upcoming",children:"Upcoming Events"}),Object(a.jsx)("option",{value:"favourites",children:"Show Favourites"})]})}),Object(a.jsx)(I.b,{to:"/events/add",children:Object(a.jsxs)(S.a,{variant:"btn button",className:"d-flex align-items-center",children:[Object(a.jsx)("img",{height:"20px",className:"mr-1",src:A,alt:""}),"Add Event"]})})]})]})},T=n.p+"static/media/star-regular.128d02cb.svg",_=n.p+"static/media/star-solid.ad4ae2e6.svg",P=function(e){var t=e.events,n=e.favouriteEvent;console.log(t);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(k.a,{responsive:"lg",variant:"dark",striped:!0,bordered:!0,hover:!0,children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Event"}),Object(a.jsx)("th",{children:"Details"}),Object(a.jsx)("th",{children:"Location"}),Object(a.jsx)("th",{children:"Added by"}),Object(a.jsx)("th",{children:"Manage"})]})}),Object(a.jsx)("tbody",{children:t.map((function(e){return Object(a.jsxs)("tr",{id:e._id,children:[Object(a.jsxs)("td",{children:[Object(a.jsx)("img",{className:"fav-star",alt:"",src:e.favourite?_:T,onClick:function(){return n(e._id)}}),e.name]}),Object(a.jsxs)("td",{className:"d-flex flex-column",children:[e.date,Object(a.jsxs)("span",{children:["Starts at ",e.time]})]}),Object(a.jsx)("td",{children:e.location}),Object(a.jsx)("td",{children:e.user}),Object(a.jsx)("td",{children:Object(a.jsx)(I.b,{to:"/full-stack-events-app/events/update/".concat(e._id),children:Object(a.jsx)(S.a,{className:"w-100",variant:"btn button",children:"Manage Event"})})})]},e._id)}))})]})})},q=n(84),L=n.p+"static/media/user-circle-solid.0633ff3e.svg",B=function(){return Object(a.jsx)("header",{className:"mb-5",children:Object(a.jsx)(f.a,{children:Object(a.jsxs)("nav",{className:"py-3 d-flex",children:[Object(a.jsx)("h3",{className:"mr-3 text-light",href:"#home",children:"E V E N T"}),Object(a.jsx)(q.a,{className:"mr-auto",children:Object(a.jsx)(I.b,{to:"/events",className:"mr-3 nav-link text-light",children:"View Events"})}),Object(a.jsx)(I.b,{to:"/full-stack-events-app/profile",children:Object(a.jsxs)(S.a,{variant:"btn",className:"mr-2 button d-flex align-items-center",children:[Object(a.jsx)("img",{height:"20px",className:"mr-1",src:L,alt:""}),"Profile"]})})]})})})},J=function(e){var t=e.user,n=e.apiClient,s=Object(c.useState)({}),r=Object(d.a)(s,2),i=r[0],l=r[1];return Object(a.jsxs)(g.a,{className:"mb-5",onChange:function(e){return function(e){l({name:e.currentTarget.name.value,date:e.currentTarget.date.value,time:e.currentTarget.time.value,location:e.currentTarget.location.value,description:e.currentTarget.description.value,favourite:!1,user:t.username})}(e)},onSubmit:function(e){return function(e){e.preventDefault(),n.createEvent(i).then((function(t){console.log(t),C.a.success(t.data.message),e.target.name.value="",e.target.date.value="",e.target.time.value="",e.target.location.value="",e.target.description.value=""})).catch((function(e){alert(e)}))}(e)},children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"name",children:"Event Name"}),Object(a.jsx)("input",{type:"text",style:{width:"100%"},className:"input-styled",name:"name",required:!0})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"location",children:"Event Location"}),Object(a.jsx)("input",{type:"text",style:{width:"100%"},className:"input-styled",name:"location",required:!0})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsxs)("div",{className:"col",children:[Object(a.jsx)("label",{htmlFor:"date",children:"Event Date"}),Object(a.jsx)("input",{type:"date",name:"date",style:{width:"100%"},className:"input-styled",required:!0})]}),Object(a.jsxs)("div",{className:"col",children:[Object(a.jsx)("label",{htmlFor:"time",children:"Event Time"}),Object(a.jsx)("input",{type:"time",name:"time",style:{width:"100%"},className:"input-styled",required:!0})]})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"description",children:"Event Description"}),Object(a.jsx)("textarea",{style:{width:"100%"},className:"input-styled",name:"description",rows:"3"})]}),Object(a.jsx)("button",{type:"submit",className:"btn button mr-3",children:"Add Event"}),Object(a.jsx)(I.b,{to:"/full-stack-events-app/events",children:Object(a.jsx)(S.a,{variant:"outline-light",children:"Cancel"})})]})},M=function(e){var t=e.eventId,n=e.apiClient,s=Object(c.useState)({_id:"",date:"",description:"",favourite:void 0,location:"",name:"",time:"",user:""}),r=Object(d.a)(s,2),i=r[0],l=r[1],o=Object(c.useState)(!1),u=Object(d.a)(o,2),j=u[0],b=u[1];Object(c.useEffect)((function(){n.getEvent(t).then((function(e){var t=e.data[0];l({_id:t._id,date:t.date,description:t.description,favourite:t.favourite,location:t.location,name:t.name,time:t.time,user:t.user})})).catch((function(e){console.log(e)}))}),[]);return j?Object(a.jsx)(N.a,{to:"/full-stack-events-app/events"}):Object(a.jsxs)(g.a,{className:"mb-5",onChange:function(e){return function(e){e.preventDefault();var t={name:e.currentTarget.name.value,location:e.currentTarget.location.value,time:e.currentTarget.time.value,date:e.currentTarget.date.value,description:e.currentTarget.description.value};l((function(e){return Object(O.a)(Object(O.a)({},e),t)}))}(e)},onSubmit:function(e){return function(e){e.preventDefault(),n.updateEvent(i._id,i).then((function(){C.a.success("Event updated"),b(!0)})).catch((function(e){console.error(e)}))}(e)},children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"name",children:"Event Name"}),Object(a.jsx)("input",{value:i.name,type:"text",style:{width:"100%"},className:"input-styled",name:"name",required:!0})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"location",children:"Event Location"}),Object(a.jsx)("input",{value:i.location,type:"text",style:{width:"100%"},className:"input-styled",name:"location",required:!0})]}),Object(a.jsxs)("div",{className:"form-group row",children:[Object(a.jsxs)("div",{className:"col",children:[Object(a.jsx)("label",{htmlFor:"date",children:"Event Date"}),Object(a.jsx)("input",{value:i.date,type:"date",name:"date",style:{width:"100%"},className:"input-styled",required:!0})]}),Object(a.jsxs)("div",{className:"col",children:[Object(a.jsx)("label",{htmlFor:"time",children:"Event Time"}),Object(a.jsx)("input",{value:i.time,type:"time",name:"time",style:{width:"100%"},className:"input-styled",required:!0})]})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"description",children:"Event Description"}),Object(a.jsx)("textarea",{value:i.description,style:{width:"100%"},className:"input-styled",name:"description",rows:"3"})]}),Object(a.jsx)("button",{type:"submit",className:"btn button mr-3",children:"Update Event"}),Object(a.jsx)("button",{onClick:function(){return e=i._id,void n.deleteEvent(e).then((function(){C.a.success("Event deleted"),b(!0)})).catch((function(e){C.a.danger("Unable to delete event")}));var e},className:"btn button-delete mr-3",children:"Delete Event"}),Object(a.jsx)(I.b,{to:"/full-stack-events-app/events",children:Object(a.jsx)(S.a,{className:"btn",variant:"outline-light",children:"Cancel"})})]})},G=function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsx)(f.a,{children:Object(a.jsx)(F,{logout:e.logout,user:e.user,events:e.events,apiClient:e.apiClient})})]})},V=function(e){var t=e.user,n=e.apiClient;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(f.a,{children:[Object(a.jsx)("h3",{className:"my-5",children:"Add Event"}),Object(a.jsx)(J,{user:t,apiClient:n})]})]})},z=(n(79),function(e){var t=e.apiClient,n=(e.user,Object(c.useState)([])),s=Object(d.a)(n,2),r=s[0],i=s[1],l=Object(c.useState)([]),j=Object(d.a)(l,2),b=j[0],p=j[1],m=function(){var e=Object(u.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getEvents();case 2:n=e.sent,i(n.data),p(n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){m()}),[]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(f.a,{children:[Object(a.jsx)(D,{filterEvents:function(e){if("favourites"===e){var t=r.filter((function(e){return e.favourite}));p(t)}else if("upcoming"===e){var n=new Date,a=String(n.getDate()).padStart(2,"0"),c=String(n.getMonth()+1).padStart(2,"0"),s=n.getFullYear();n=c+"/"+a+"/"+s,console.log(n);var i=r.filter((function(e){return new Date(e.date)>new Date(n)})).sort((function(e,t){return new Date(e.date)-new Date(t.date)}));p(i)}else p(r)},allEvents:r}),Object(a.jsx)(P,{events:b,apiClient:t,favouriteEvent:function(e){var n=r.filter((function(t){return t._id===e})),a=Object(d.a)(n,1)[0];a.favourite=!a.favourite,t.updateEvent(e,a).then((function(){m()})).catch((function(e){console.log(e)}))}})]})]})}),H=function(e){var t=e.match.params.id;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(f.a,{children:[Object(a.jsx)("h3",{className:"my-5",children:"Update Event"}),Object(a.jsx)(M,{apiClient:e.apiClient,eventId:t})]})]})},Y=n(45),K=function(e){var t=e.component,n=e.loggedIn,c=e.props,s=Object(Y.a)(e,["component","loggedIn","props"]);return Object(a.jsx)(N.b,Object(O.a)(Object(O.a)({},s),{},{render:function(e){return n?Object(a.jsx)(t,Object(O.a)(Object(O.a)({},c),e)):Object(a.jsx)(N.a,{to:{pathname:"/full-stack-events-app/"}})}}))},Q=void 0,R=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)({}),i=Object(d.a)(r,2),l=i[0],j=i[1],b=Object(c.useState)([]),p=Object(d.a)(b,2),m=p[0],h=p[1],O=new v((function(){return window.localStorage.getItem("EventsAppUserToken")}),(function(){return Q.logout()})),f=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getEvents();case 2:t=e.sent,h(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){if(f(),localStorage.getItem("EventsAppUserToken")){var e=localStorage.getItem("EventsAppUser");j(JSON.parse(e)),s(!0)}else s(!1)}),[]);var x=function(e,t){j(e),window.localStorage.setItem("EventsAppUser",JSON.stringify(e)),window.localStorage.setItem("EventsAppUserToken",t),s(!0)};return Object(a.jsx)("div",{id:"App",children:Object(a.jsx)(I.a,{children:Object(a.jsxs)(N.d,{children:[Object(a.jsx)(N.b,{exact:!0,path:"/full-stack-events-app/",render:function(){return Object(a.jsx)(E,{apiClient:O,loggedIn:n,logInFunc:x})}}),Object(a.jsx)(K,{exact:!0,path:"/full-stack-events-app/events",component:z,loggedIn:n,props:{apiClient:O,user:l}}),Object(a.jsx)(K,{exact:!0,path:"/full-stack-events-app/events/add",component:V,loggedIn:n,props:{apiClient:O,user:l}}),Object(a.jsx)(K,{exact:!0,path:"/full-stack-events-app/events/update/:id",component:H,loggedIn:n,props:{apiClient:O,user:l,events:m}}),Object(a.jsx)(K,{exact:!0,path:"/full-stack-events-app/profile",component:G,loggedIn:n,props:{logout:function(){window.localStorage.removeItem("EventsAppUser"),window.localStorage.removeItem("EventsAppUserToken"),s(!1),j({})},user:l,events:m,apiClient:O}})]})})})},W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,87)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};i.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(R,{})}),document.getElementById("root")),W()}},[[80,1,2]]]);
//# sourceMappingURL=main.10b7e401.chunk.js.map