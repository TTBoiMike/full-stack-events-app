(this["webpackJsonpfull-stack-events-app"]=this["webpackJsonpfull-stack-events-app"]||[]).push([[0],{64:function(e,t,n){},74:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n(0),r=n.n(a),c=n(24),i=n.n(c),l=(n(64),n(8)),o=n(9),u=n(11),d=n(10),h=n(25),p=n.n(h),j=(n(43),n(101)),v=n(100),b=n(96),f=n(97),m=(n(44),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(l.a)(this,n),(s=t.call(this,e)).state={loginDisabled:!1,signupDisabled:!1},s}return Object(o.a)(n,[{key:"submitLogin",value:function(e){var t=this;e.preventDefault(),this.setState({loginDisabled:!0}),this.props.client.logIn(e.target.username.value,e.target.password.value).then((function(e){t.setState({loginDisabled:!1});var n=e.data._doc._id;t.props.login(n,e.data.token)})).catch((function(e){alert("Unable to login at this time"),console.log(e),t.setState({loginDisabled:!1})}))}},{key:"submitSignUp",value:function(e){var t=this;e.preventDefault(),this.setState({signupDisabled:!0}),this.props.client.signUp(e.target.username.value,e.target.password.value).then((function(n){200===n.status?p.a.success("User created: ".concat(e.target.username.value)):p.a.error("An error occured."),t.setState({signupDisabled:!1})})).catch((function(e){alert("Unable to signup at this time"),console.log(e),t.setState({signupDisabled:!1})})).finally((function(){return document.getElementById("signup-form").reset()}))}},{key:"render",value:function(){var e=this;return Object(s.jsx)(b.a,{className:"mt-5 d-flex justify-content-center align-items-center",children:Object(s.jsx)(j.a,{style:{width:"18rem"},className:"login-container",children:Object(s.jsxs)(j.a.Body,{children:[Object(s.jsxs)(v.a,{onSubmit:function(t){return e.submitLogin(t)},children:[Object(s.jsx)(v.a.Group,{controlId:"formBasicEmail",id:"login-form",children:Object(s.jsx)("input",{style:{width:"100%"},placeholder:"Username",className:"input-styled",type:"username",name:"username"})}),Object(s.jsx)(v.a.Group,{controlId:"formBasicPassword",children:Object(s.jsx)("input",{style:{width:"100%"},placeholder:"Password",className:"input-styled",type:"Password",name:"password"})}),Object(s.jsx)(f.a,{variant:"btn button",className:"my-2",type:"submit",children:"Login"})]}),Object(s.jsxs)("small",{children:["Sample username: mike, july, keith",Object(s.jsx)("br",{})," Sample password: test"]})]})})})}}]),n}(r.a.Component)),O=n(26),x=n(14),g=n.n(x),y=n(21),E=n(57),k=n(16),w=n.p+"static/media/user-circle-solid.0633ff3e.svg",N=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(s.jsx)("header",{children:Object(s.jsx)(b.a,{children:Object(s.jsxs)("nav",{className:"py-3 d-flex",children:[Object(s.jsx)("h3",{className:"mr-3 text-light",href:"#home",children:"E V E N T"}),Object(s.jsx)(E.a,{className:"mr-auto",children:Object(s.jsx)(k.b,{to:"/full-stack-events-app/user",className:"mr-3 nav-link text-light",children:"View Events"})}),Object(s.jsx)(k.b,{to:"/full-stack-events-app/user/profile",children:Object(s.jsxs)(f.a,{variant:"btn",className:"mr-2 button d-flex align-items-center",children:[Object(s.jsx)("img",{height:"20px",className:"mr-1",src:w,alt:""}),"Profile"]})})]})})})}}]),n}(r.a.Component),I=n(6),U=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(l.a)(this,n),(s=t.call(this,e)).deleteEvent=function(){var e=Object(y.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.props.client.deleteEvent(t).then((function(){s.setState({updating:!1,redirectToReferrer:!0}),s.props.fetchEvents()}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.state={event:{name:"",location:"",date:"",time:"",description:"",favourite:!1},disabled:!1,updating:!1,redirectToReferrer:!1},s}return Object(o.a)(n,[{key:"manageEventUpdate",value:function(e){var t=this;e&&(this.setState({updating:!0}),this.props.client.getEvent(e).then((function(e){var n=e.data[0],s=n.name,a=n.location,r=n.date,c=n.time,i=n.description,l=n.favourite;t.setState({event:{name:s,location:a,date:r,time:c,description:i,favourite:l}})})))}},{key:"componentDidMount",value:function(){this.props.match&&this.manageEventUpdate(this.props.match.params.id)}},{key:"formReset",value:function(e){this.setState({event:{name:"",location:"",date:"",time:"",description:"",favourite:!1}})}},{key:"handleFormChange",value:function(e){e.preventDefault();var t=this.state.event;t[e.target.name]=e.target.value,this.setState({event:t})}},{key:"submitNewEvent",value:function(e){var t=this;if(e.preventDefault(),this.state.updating)this.props.client.updateEvent(this.props.match.params.id,this.state.event).then((function(){return t.props.fetchEvents()}));else{var n=this.props.userInfo.userName;this.props.client.createEvent(Object(O.a)(Object(O.a)({},this.state.event),{},{user:n})).then((function(){t.props.fetchEvents()}))}this.formReset(e),this.setState({updating:!1,redirectToReferrer:!0})}},{key:"render",value:function(){var e=this;return this.state.redirectToReferrer?Object(s.jsx)(I.a,{exact:!0,to:"/full-stack-events-app/user"}):Object(s.jsxs)("div",{className:"mb-5",children:[Object(s.jsxs)("h3",{className:"my-5",children:[this.state.updating?"Update":"Add New"," Event"]}),Object(s.jsxs)(v.a,{onChange:function(t){return e.handleFormChange(t)},onSubmit:function(t){return e.submitNewEvent(t)},children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"name",children:"Event Name"}),Object(s.jsx)("input",{type:"text",style:{width:"100%"},className:"input-styled",name:"name",value:this.state.event.name,required:!0})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"location",children:"Event Location"}),Object(s.jsx)("input",{type:"text",style:{width:"100%"},className:"input-styled",name:"location",value:this.state.event.location,required:!0})]}),Object(s.jsxs)("div",{className:"form-group row",children:[Object(s.jsxs)("div",{className:"col",children:[Object(s.jsx)("label",{htmlFor:"date",children:"Event Date"}),Object(s.jsx)("input",{type:"date",name:"date",style:{width:"100%"},className:"input-styled",value:this.state.event.date,required:!0})]}),Object(s.jsxs)("div",{className:"col",children:[Object(s.jsx)("label",{htmlFor:"time",children:"Event Time"}),Object(s.jsx)("input",{type:"time",name:"time",style:{width:"100%"},className:"input-styled",value:this.state.event.time,required:!0})]})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"description",children:"Event Description"}),Object(s.jsx)("textarea",{style:{width:"100%"},className:"input-styled",name:"description",rows:"3",value:this.state.event.description})]}),Object(s.jsx)("button",{type:"submit",className:"btn button mr-3",disabled:this.state.disabled,children:this.state.updating?"Update Event":"Add Event"}),Object(s.jsx)(f.a,{variant:"outline-light",onClick:function(){return e.setState({redirectToReferrer:!0})},children:"Cancel"})]}),Object(s.jsx)(f.a,{className:"mt-5",variant:"btn btn-dark",style:{display:this.state.updating?"block":"none"},onClick:function(){return e.deleteEvent(e.props.match.params.id)},children:"Delete Event"})]})}}]),n}(r.a.Component),S=n.p+"static/media/plus-circle-solid.3a4d615f.svg",D=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"handleFilterInputs",value:function(e){var t=e.currentTarget.filter.value;this.props.filterFunction(e,t)}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{className:"filter-bar my-5 rounded d-flex justify-content-between align-items-center",children:[Object(s.jsx)("div",{children:Object(s.jsxs)("h3",{children:[Object(s.jsx)("span",{className:"text-purple",children:this.props.allEvents.length})," ",1===this.props.allEvents.length?"Event":"Events"]})}),Object(s.jsxs)("div",{className:"d-flex align-items-center",children:[Object(s.jsx)(v.a,{className:"mr-3",onChange:function(t){return e.handleFilterInputs(t)},children:Object(s.jsxs)("select",{id:"filter",children:[Object(s.jsx)("option",{value:"recently-added",selected:!0,children:"Recently Added"}),Object(s.jsx)("option",{value:"by-date",children:"Filter by Date"}),Object(s.jsx)("option",{value:"favourites",children:"Show Favourites"})]})}),Object(s.jsx)(k.b,{to:"/full-stack-events-app/user/add",children:Object(s.jsxs)(f.a,{variant:"btn button",className:"d-flex align-items-center",children:[Object(s.jsx)("img",{height:"20px",className:"mr-1",src:S,alt:""}),"Add Event"]})})]})]})}}]),n}(r.a.Component),C=n(58),F=n(98),A=n.p+"static/media/star-regular.128d02cb.svg",L=n.p+"static/media/star-solid.ad4ae2e6.svg",T=(n(74),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).favouriteEvent=function(t){var n=e.props.events.filter((function(e){return e._id===t})),s=Object(C.a)(n,1)[0];s.favourite=!s.favourite,e.props.client.updateEvent(t,s).then((function(){return e.props.fetchEvents()}))},e.buildEventRows=function(){return e.props.events.map((function(t){return Object(s.jsxs)("tr",{id:t._id,children:[Object(s.jsxs)("td",{children:[Object(s.jsx)("img",{className:"fav-star",alt:"",src:t.favourite?L:A,onClick:function(n){return e.favouriteEvent(t._id)}}),t.name]}),Object(s.jsxs)("td",{className:"d-flex flex-column",children:[t.date,Object(s.jsxs)("span",{children:["Starts at ",t.time]})]}),Object(s.jsx)("td",{children:t.location}),Object(s.jsx)("td",{children:t.description}),Object(s.jsx)("td",{children:t.user}),Object(s.jsx)("td",{children:Object(s.jsx)(k.b,{to:"/full-stack-events-app/user/update/".concat(t._id),children:Object(s.jsx)(f.a,{className:"w-100",variant:"btn button",children:"Manage Event"})})})]})}))},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(s.jsx)("div",{children:Object(s.jsxs)(F.a,{responsive:"lg",variant:"dark",striped:!0,bordered:!0,hover:!0,children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Event"}),Object(s.jsx)("th",{children:"Date"}),Object(s.jsx)("th",{children:"Location"}),Object(s.jsx)("th",{children:"Description"}),Object(s.jsx)("th",{children:"Added by"}),Object(s.jsx)("th",{})]})}),Object(s.jsx)("tbody",{children:this.buildEventRows()})]})})}}]),n}(r.a.Component)),P=n(102),R=n(99),B=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"calcUserEvents",value:function(){var e=this;return this.props.events.filter((function(t){return t.user===e.props.userInfo.userName})).length}},{key:"submitProfileUpdate",value:function(e,t){var n=this;e.preventDefault();var s=e.currentTarget.username.value;this.props.client.updateUser(t,{username:s}).then((function(e){200===e.status?(p.a.success(e.data),n.props.updateUserName(s)):p.a.warning(e.data)})).finally((function(){return document.getElementById("account-form").reset()}))}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{className:"my-5",children:"Profile"}),Object(s.jsxs)(P.a,{defaultActiveKey:"home",id:"uncontrolled-tab-example",children:[Object(s.jsxs)(R.a,{eventKey:"home",title:"Account Details",children:[Object(s.jsxs)(F.a,{className:"mt-3",variant:"dark",bordered:!0,striped:!0,children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:"Username"}),Object(s.jsx)("td",{children:"Events in schedule"})]})}),Object(s.jsx)("tbody",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:this.props.userInfo.userName}),Object(s.jsx)("td",{children:this.calcUserEvents()})]})})]}),Object(s.jsx)(k.b,{to:"/full-stack-events-app",children:Object(s.jsx)(f.a,{variant:"btn button",onClick:function(){return e.props.logout()},children:"Logout"})})]}),Object(s.jsx)(R.a,{eventKey:"profile",title:"Edit Account",children:Object(s.jsxs)(v.a,{className:"mt-3",id:"account-form",onSubmit:function(t){return e.submitProfileUpdate(t,e.props.userInfo.userId)},children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"username",className:"text-light",children:" Change Username"}),Object(s.jsx)("input",{style:{width:"100%"},className:"input-styled",type:"text",id:"username",name:"username",placeholder:"new username",autoComplete:"off"})]}),Object(s.jsx)(f.a,{type:"submit",variant:"btn button",children:"Submit"})]})})]})]})}}]),n}(r.a.Component),_=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(l.a)(this,n),(s=t.call(this,e)).filterEvents=function(e,t){if(e.preventDefault(),"by-date"===t){var n=s.state.allEvents.sort((function(e,t){return new Date(e.date)-new Date(t.date)}));s.setState({filteredEvents:n})}else if("favourites"===t){var a=s.state.allEvents.filter((function(e){return!0===e.favourite}));s.setState({filteredEvents:a})}else s.fetchEvents()},s.fetchEvents=Object(y.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.props.client.getEvents();case 2:t=e.sent,s.setState({allEvents:t.data,filteredEvents:t.data});case 4:case"end":return e.stop()}}),e)}))),s.fetchUser=function(){var e=Object(y.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.props.client.getUser(t);case 2:n=e.sent,s.setState({user:{userId:t,userName:n.data.username}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.updateUserName=function(e){s.setState({user:{userName:e}})},s.state={user:{userId:"",userName:""},allEvents:[],filteredEvents:[]},s}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.fetchEvents(),this.fetchUser(this.props.userId)}},{key:"render",value:function(){var e=this;return Object(s.jsx)("div",{children:Object(s.jsxs)(k.a,{children:[Object(s.jsx)(N,{}),Object(s.jsx)(b.a,{children:Object(s.jsxs)(I.d,{children:[Object(s.jsxs)(I.b,{exact:!0,path:"/full-stack-events-app/user",children:[Object(s.jsx)(D,{filterFunction:this.filterEvents,allEvents:this.state.allEvents}),Object(s.jsx)(T,{client:this.props.client,events:this.state.filteredEvents,fetchEvents:this.fetchEvents,updateEvent:this.updateEvent})]}),Object(s.jsx)(I.b,{exact:!0,path:"/full-stack-events-app/user/add",children:Object(s.jsx)(U,{userInfo:this.state.user,client:this.props.client,fetchEvents:this.fetchEvents,updating:this.state.updating})}),Object(s.jsx)(I.b,{exact:!0,path:"/full-stack-events-app/user/update/:id",render:function(t){return Object(s.jsx)(U,Object(O.a)(Object(O.a)({},t),{},{client:e.props.client,fetchEvents:e.fetchEvents}))}}),Object(s.jsx)(I.b,{exact:!0,path:"/full-stack-events-app/user/profile",children:Object(s.jsx)(B,{logout:this.props.logout,updateUserName:this.updateUserName,userInfo:this.state.user,client:this.props.client,events:this.state.allEvents})})]})})]})})}}]),n}(r.a.Component),q=n(36),M=n.n(q),K="https://fs-events-app.herokuapp.com/",G=function(){function e(t,n){Object(l.a)(this,e),this.token=t,this.logoutFunction=n}return Object(o.a)(e,[{key:"createUserAction",value:function(e,t,n){var s=this;return M()({method:e,url:t,headers:{authorization:this.token()},data:n}).catch((function(e){if(403===e.response)return s.logoutFunction(),Promise.reject();throw e}))}},{key:"logIn",value:function(){var e=Object(y.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M()({method:"post",url:"".concat(K,"auth"),data:{username:t,password:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"signUp",value:function(){var e=Object(y.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M()({method:"post",url:"".concat(K,"signup"),data:{username:t,password:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getUser",value:function(e){return this.createUserAction("get","".concat(K,"user/").concat(e))}},{key:"updateUser",value:function(e,t){return this.createUserAction("put","".concat(K,"user/").concat(e),t)}},{key:"createEvent",value:function(e){return this.createUserAction("post",K,e)}},{key:"getEvents",value:function(){return this.createUserAction("get",K)}},{key:"getEvent",value:function(e){return this.createUserAction("get","".concat(K).concat(e))}},{key:"deleteEvent",value:function(e){return this.createUserAction("delete","".concat(K).concat(e))}},{key:"updateEvent",value:function(e,t){return this.createUserAction("put","".concat(K).concat(e),t)}}]),e}(),J=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(l.a)(this,n),(s=t.call(this,e)).login=function(e,t){window.localStorage.setItem("token",t),window.localStorage.setItem("UserId",e),s.setState({token:t,userId:e,isLoggedIn:!0})},s.logout=function(){window.localStorage.removeItem("token"),window.localStorage.removeItem("UserId"),s.setState({token:void 0,userId:void 0,isLoggedIn:!1})},s.state={token:window.localStorage.getItem("token"),userId:window.localStorage.getItem("UserId"),isLoggedIn:!1},s.apiClient=new G((function(){return s.state.token}),(function(){return s.logout()})),s}return Object(o.a)(n,[{key:"render",value:function(){return this.state.isLoggedIn?Object(s.jsx)(_,{userId:this.state.userId,client:this.apiClient,logout:this.logout}):Object(s.jsx)(m,{login:this.login,client:this.apiClient})}}]),n}(r.a.Component),V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,103)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),s(e),a(e),r(e),c(e)}))};i.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(J,{})}),document.getElementById("root")),V()}},[[94,1,2]]]);
//# sourceMappingURL=main.23abaf63.chunk.js.map